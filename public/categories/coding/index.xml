<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Coding - Category - LexusLee&#39;s blog</title>
        <link>https://example.com/categories/coding/</link>
        <description>Coding - Category - LexusLee&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>lexuscyborg103@gmail.com (LexusLee)</managingEditor>
            <webMaster>lexuscyborg103@gmail.com (LexusLee)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Sun, 13 Feb 2022 21:55:54 &#43;0800</lastBuildDate><atom:link href="https://example.com/categories/coding/" rel="self" type="application/rss+xml" /><item>
    <title>è®°ä¸€æ¬¡ k8s apiserver watch hang é—®é¢˜æ’æŸ¥</title>
    <link>https://example.com/k8s-api-watch-hang-dignosis/</link>
    <pubDate>Sun, 13 Feb 2022 21:55:54 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/k8s-api-watch-hang-dignosis/</guid>
    <description><![CDATA[Lexus Lee è®°ä¸€æ¬¡ k8s apiserver watch hang é—®é¢˜æ’æŸ¥ é—®é¢˜èƒŒæ™¯ æ³¨ğŸ“¢: æœ¬æ–‡ä¸­æ¶‰åŠ apiserver åœ°å€å’Œ ingressgateway åœ°å€, ä¸ºè„±æ•å¤„ç†, å°†ä¼šåšé©¬èµ›å…‹å¤„ç†ï¼ï¼ï¼
ä¼ ç»Ÿçš„ kubernetes apiserver è¯·æ±‚è®¿é—®é“¾è·¯ä¸ºå®¢æˆ·ç«¯ç›´è¿ apiserverï¼Œä¸ºäº†åš apiserver é«˜å¯ç”¨ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šç»™ apiserver å‰ç«¯å†å¥—ä¸€å±‚4å±‚æˆ–7å±‚ä»£ç†åšå¤šä¸ª apiserver å®ä¾‹çš„è´Ÿè½½å‡è¡¡ã€‚
åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨äº† istio çš„ ingressgateway ä½œä¸º client -&gt; apiserver è¿™æ¡é“¾è·¯ä¸­çš„7å±‚ä»£ç†ã€‚é“¾è·¯å˜æˆäº† client -&gt; ingressgateway -&gt; apiserver ï¼Œgateway æš´éœ² 80 ç«¯å£ä¾›å®¢æˆ·ç«¯è®¿é—®, åŒæ—¶é€šè¿‡ istio virtualService + destinationRule è§„åˆ™é…ç½® gateway èƒ½é€šè¿‡åŸŸåè®¿é—®åˆ° apiserver 6443 ç«¯å£ï¼Œä»è€Œå®ç°æµé‡è·¯ç”±ã€‚
å…·ä½“é“¾è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ
åœ¨è¿™æ ·çš„é“¾è·¯ä¸‹ï¼Œæˆ‘ä»¬é‡åˆ°äº†å¦‚ä¸‹é—®é¢˜ï¼Œ
åœ¨ k8s apiserver 1.18 ç‰ˆæœ¬çš„é›†ç¾¤åœ¨æ»šåŠ¨é‡å¯è¿‡å‡ºç°éƒ¨åˆ†ç»„ä»¶æ— æ³• watch åˆ°äº‹ä»¶çš„æƒ…å†µï¼Œå®¢æˆ·ç«¯ watch è¯·æ±‚å¶å‘ 503ã€‚éœ€è¦é‡å¯ç»„ä»¶ï¼Œé‡å»º watch è¿æ¥æ‰èƒ½æ¢å¤ã€‚]]></description>
</item><item>
    <title>ã€Šå®¹å™¨é«˜æ‰‹å®æˆ˜ã€‹ç¬”è®°</title>
    <link>https://example.com/container-travel-lesson-01/</link>
    <pubDate>Sun, 26 Dec 2021 13:40:08 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/container-travel-lesson-01/</guid>
    <description><![CDATA[èƒŒæ™¯ æœ€è¿‘åœ¨æ¥è§¦ã€Šå®¹å™¨é«˜æ‰‹å®æˆ˜ã€‹è¿™é—¨è¯¾ï¼Œä½œä¸ºæœ‰ä¸€å®šå®¹å™¨ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œä»è¿™ä¸ªè§†è§’ä¸‹ï¼Œæˆ‘ä¼šè®°å½•ä¸€äº›éåŸºç¡€çš„ï¼Œä½†æ˜¯ä¸æ˜¯éœ€è¦å›çœ‹ä¸€çœ¼çš„è¯¾ç¨‹ç¬”è®°ï¼Œç”¨äºåˆ†äº«ã€‚
è¯¾ç¨‹ç›¸å…³æºç åŠç¬”è®°æˆ‘æ”¾åœ¨è¿™ä¸ªè¿™ä¸ªé“¾æ¥ä¸­, æ¬¢è¿ fork &amp; comment~
ã€Šå®¹å™¨é«˜æ‰‹å®æˆ˜è¯¾ç¨‹ã€‹ æºç åŠç¬”è®°, å…±åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼Œä¸‹é¢å°†é€ä¸€ä»‹ç»ï¼Œ
 Cpu å†…å­˜ æ–‡ä»¶ç³»ç»Ÿ ä¸€å·è¿›ç¨‹ å®¹å™¨ç½‘ç»œ å®¹å™¨ debug å·¥å…· å®¹å™¨å®‰å…¨  å®¹å™¨ load Load Average ç­‰äºå•ä½æ—¶é—´å†…æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åŠ ä¸Šå¯è¿è¡Œé˜Ÿåˆ—çš„è¿›ç¨‹
ç¬¬ä¸€ï¼Œä¸è®ºè®¡ç®—æœº CPU æ˜¯ç©ºé—²è¿˜æ˜¯æ»¡è´Ÿè½½ï¼ŒLoad Average éƒ½æ˜¯ Linux è¿›ç¨‹è°ƒåº¦å™¨ä¸­å¯è¿è¡Œé˜Ÿåˆ—ï¼ˆRunning Queueï¼‰é‡Œçš„ä¸€æ®µæ—¶é—´çš„å¹³å‡è¿›ç¨‹æ•°ç›®ã€‚
ç¬¬äºŒï¼Œè®¡ç®—æœºä¸Šçš„ CPU è¿˜æœ‰ç©ºé—²çš„æƒ…å†µä¸‹ï¼ŒCPU Usage å¯ä»¥ç›´æ¥åæ˜ åˆ°&quot;load average&quot;ä¸Šï¼Œä»€ä¹ˆæ˜¯ CPU è¿˜æœ‰ç©ºé—²å‘¢ï¼Ÿå…·ä½“æ¥è¯´å°±æ˜¯å¯è¿è¡Œé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹æ•°ç›®å°äº CPU ä¸ªæ•°ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå•ä½æ—¶é—´è¿›ç¨‹ CPU Usage ç›¸åŠ çš„å¹³å‡å€¼åº”è¯¥å°±æ˜¯&quot;load average&quot;çš„å€¼ã€‚
ç¬¬ä¸‰ï¼Œè®¡ç®—æœºä¸Šçš„ CPU æ»¡è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—æœºä¸Šçš„ CPU å·²ç»æ˜¯æ»¡è´Ÿè½½äº†ï¼ŒåŒæ—¶è¿˜æœ‰æ›´å¤šçš„è¿›ç¨‹åœ¨æ’é˜Ÿéœ€è¦ CPU èµ„æºã€‚è¿™æ—¶&quot;load average&quot;å°±ä¸èƒ½å’Œ CPU Usage ç­‰åŒäº†ã€‚
æ¯”å¦‚å¯¹äºå•ä¸ª CPU çš„ç³»ç»Ÿï¼ŒCPU Usage æœ€å¤§åªæ˜¯æœ‰ 100%ï¼Œä¹Ÿå°± 1 ä¸ª CPUï¼›è€Œ&quot;load average&quot;çš„å€¼å¯ä»¥è¿œè¿œå¤§äº 1ï¼Œå› ä¸º&quot;load average&quot;çœ‹çš„æ˜¯æ“ä½œç³»ç»Ÿä¸­å¯è¿è¡Œé˜Ÿåˆ—ä¸­è¿›ç¨‹çš„ä¸ªæ•°ã€‚]]></description>
</item><item>
    <title>ä» Facebook æ•…éšœå¼€å§‹æ¢ç´¢ BGP å·¥å…·ä½¿ç”¨</title>
    <link>https://example.com/tools-to-explore-bgp/</link>
    <pubDate>Tue, 16 Nov 2021 11:46:09 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/tools-to-explore-bgp/</guid>
    <description><![CDATA[èƒŒæ™¯ ä¸Šä¸ªæœˆï¼ŒFacebook å‘ç”Ÿäº†ä¸€æ¬¡ç”± BGP å¼•èµ·çš„å¤§å‹æ•…éšœï¼Œä»æ•…éšœæŠ¥å‘Š ä¸­æˆ‘ç¡®å®çœ‹å¾—äº‘é‡Œé›¾é‡Œã€‚æ‰€ä»¥è¿‘æœŸé˜…è¯»ä¸€äº›æ–‡ç« ï¼ŒæœŸæœ›æ·±å…¥å­¦ä¹ ã€‚
è¿™ç¯‡åšæ–‡å°†ä¼šåˆ†äº«ä¸€äº›æˆ‘å¦‚ä½•å­¦ä¹  BGP çš„è¿‡ç¨‹åŠç”¨æ¥æŸ¥è¯¢ BGP ä¿¡æ¯çš„ç›¸å…³å·¥å…·ä½¿ç”¨ã€‚å› ä¸ºæˆ‘å¯¹ BGP ä¸æ˜¯é‚£ä¹ˆäº†è§£ï¼Œæ•…æ–‡ç« éš¾å…æœ‰ä¸ç²¾ç¡®çš„éƒ¨åˆ†ï¼Œå¸Œæœ›å¤šå¤šäº¤æµã€‚
BGP æ¢ç´¢ä¹‹è·¯ å¦‚ä½•å‘å¸ƒBGPè·¯ç”± ä¹‹å‰æˆ‘ä»æ²¡æœ‰å¼€å§‹æ¥è§¦ BGP çš„åŸå› ä¹‹ä¸€æ˜¯&ndash;æˆ‘ä¸çŸ¥é“å¦‚ä½•åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šé€šè¿‡ BGP å‘å¸ƒè·¯ç”±ã€‚
å¯¹äºå¤§å¤šæ•°ç½‘ç»œåè®®ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œéƒ½å¯ä»¥æŠ˜è…¾ï¼Œè‡ªå·±å®ç°åè®®ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ã€‚
  å‘è¡Œä½ è‡ªå·±çš„TLSè¯ä¹¦
  ç¼–å†™ä½ è‡ªå·±çš„HTTPæœåŠ¡å™¨
  ç¼–å†™ä½ è‡ªå·±çš„TCPå®ç°
  ä¸ºä½ çš„åŸŸåç¼–å†™ä½ è‡ªå·±çš„æƒå¨DNSæœåŠ¡å™¨
  å»ºç«‹ä½ è‡ªå·±çš„è¯ä¹¦é¢å‘æœºæ„
  ä½†å¯¹äºBGPï¼Œæˆ‘è®¤ä¸ºé™¤éä½ æ‹¥æœ‰è‡ªå·±çš„ ASNï¼Œå¦åˆ™ä¸èƒ½è‡ªå·±å‘å¸ƒè·¯ç”±ï¼Œå°½ç®¡å¯èƒ½å¯ä»¥åœ¨ä½ çš„å®¶åº­ç½‘ç»œä¸Šå®ç°BGPï¼Œä½†æˆ‘å¸Œæœ›å®ƒä»¬è¿è¡Œåœ¨çœŸæ­£çš„äº’è”ç½‘ä¸Šã€‚
äºæ˜¯æˆ‘å¼€å§‹ç€æ‰‹äºå¦‚ä½•åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šå‘å¸ƒ BGP è·¯ç”±ã€‚
é¦–å…ˆæˆ‘ä»¬æ¥è°ˆè°ˆ BGP çš„ä¸€äº›æœ¯è¯­ã€‚è¿™éƒ¨åˆ†æˆ‘ä¼šç®€å•çš„ä»‹ç»ï¼Œå› ä¸ºæˆ‘å¯¹å·¥å…·æ›´æ„Ÿå…´è¶£ï¼Œè€Œä¸”ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äº BGP çš„é«˜æ°´å¹³èµ„æ–™ï¼ˆæ¯”å¦‚ cloudflare çš„è¿™ç¯‡å¸–å­ï¼‰ã€‚
ä»€ä¹ˆæ˜¯ ASï¼ˆautonomous systemï¼‰ï¼Ÿ æˆ‘ä»¬éœ€è¦äº†è§£çš„ç¬¬ä¸€ä»¶æœ¯è¯­æ˜¯ ASã€‚æ¯ä¸€ä¸ª AS éƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
å‚è€ƒè¿™ç¯‡ç»´åŸºç™¾ç§‘, ä»–ä»¬æœ‰ä»¥ä¸‹ç‰¹å¾ï¼Œ
  ç”±ä¸€ä¸ªç»„ç»‡æ‹¥æœ‰çš„ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¤§å‹ç»„ç»‡ï¼Œå¦‚ä½ çš„ISPï¼Œæ”¿åºœï¼Œå¤§å­¦ï¼ŒFacebookï¼Œç­‰ç­‰ï¼‰
  ä»–ä»¬èƒ½æ§åˆ¶ä¸€ç»„ç‰¹å®šçš„ IP åœ°å€ï¼ˆä¾‹å¦‚ï¼Œæˆ‘çš„ ISP çš„ AS åŒ…æ‹¬ 247,808 ä¸ªIPåœ°å€ï¼‰ã€‚]]></description>
</item><item>
    <title>Kube-scheduler è°ƒåº¦æ¨¡å‹ä¸ç¾å›¢æœ¬åœ°åŒ–æ”¹é€ </title>
    <link>https://example.com/kubernetes-scheduler-modified-in-meituan/</link>
    <pubDate>Sat, 09 Oct 2021 09:57:53 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/kubernetes-scheduler-modified-in-meituan/</guid>
    <description><![CDATA[èƒŒæ™¯ ä»Šå¤©ä¸»è¦åˆ†äº«ä¸‹æˆ‘åœ¨ç¾å›¢ Hulk å›¢é˜Ÿè°ƒåº¦ç³»ç»Ÿç»„æœŸé—´å­¦ä¹ åˆ°çš„ k8s scheduler è°ƒåº¦æ¨¡å‹åŠç¾å›¢å¯¹äºè°ƒåº¦å™¨ç›¸å…³æ”¹é€ 
Hulk å›¢é˜Ÿä»‹ç» Hulk æ˜¯ç¾å›¢è´Ÿè´£å®¹å™¨äº‘å¹³å°çš„å›¢é˜Ÿ, æˆ‘æ‰€åœ¨çš„ç»„æ˜¯è°ƒåº¦ç³»ç»Ÿç»„ä¸‹é¢çš„ k8s å°ç»„. ä¸»è¦è´Ÿè´£æ‰€æœ‰ k8s ç›¸å…³ç»„ä»¶å¼€å‘ç»´æŠ¤.
Kube-scheduler è°ƒåº¦æ¨¡å‹ä»‹ç» (æœ¬æ¬¡ä»‹ç»åŸºäº k8s 1.16 ç‰ˆæœ¬)
pod æ˜¯ k8s å·¥ä½œè´Ÿè½½çš„æœ€å°å®ä½“ï¼Œä¹Ÿæ˜¯ scheduler è°ƒåº¦çš„ä¸»è¦å¯¹è±¡ã€‚
k8s è°ƒåº¦å™¨æ‰€åšçš„å·¥ä½œï¼Œå³å°† pod ç»‘å®šåˆ°æŒ‡å®šèŠ‚ç‚¹ä¸Šï¼Œä¸º pod é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ã€‚
Scheduler ä¼šå…ˆ watch apiserver è·å–å…¶ä¸­å¾…è°ƒåº¦çš„ pod, å³ pod.spec.nodeName å­—æ®µä¸ºç©ºçš„ pod å¯¹è±¡, é€šè¿‡è°ƒç”¨ pod informer çš„ handler å¹¶å°†è¯¥ pod åŠ å…¥è°ƒåº¦é˜Ÿåˆ—ä¸­ã€‚
é»˜è®¤æƒ…å†µä¸‹, k8s è°ƒåº¦é˜Ÿåˆ—æ˜¯ä¸€ä¸ª PriorityQueue, å¹¶ä¸”å½“æŸäº›é›†ç¾¤ä¿¡æ¯å‘ç”Ÿæ”¹å˜æ—¶, è°ƒåº¦å™¨ä¼šå¯¹è°ƒåº¦é˜Ÿåˆ—çš„å†…å®¹è¿›è¡Œä¸€äº›ç‰¹æ®Šæ“ä½œ. åœ¨è¿™å„¿ä¸è®ºè¿°.
ä¸€æ¬¡è°ƒåº¦è¿‡ç¨‹åœ¨åˆ¤æ–­ä¸€ä¸ª Nodeæ˜¯å¦å¯ä½œä¸ºç›®æ ‡æœºå™¨æ—¶ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š
 Predicates é¢„é€‰é˜¶æ®µï¼šç¡¬æ€§æ¡ä»¶ï¼Œè¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º Predicatesã€‚è¿™æ˜¯å›ºå®šå…ˆåé¡ºåºçš„ä¸€ç³»åˆ—è¿‡æ»¤æ¡ä»¶ï¼Œä»»ä½•ä¸€ä¸ª Predicate ä¸ç¬¦åˆåˆ™æ”¾å¼ƒè¯¥ Nodeã€‚ Prioritites ä¼˜é€‰é˜¶æ®µï¼šè½¯æ€§æ¡ä»¶ï¼Œå¯¹é€šè¿‡çš„èŠ‚ç‚¹æŒ‰ç…§ä¼˜å…ˆçº§æ’åºï¼Œç§°ä¹‹ä¸º Prioritiesã€‚æ¯ä¸€ä¸ª Priority éƒ½æ˜¯ä¸€ä¸ªå½±å“å› ç´ ï¼Œéƒ½æœ‰ä¸€å®šçš„æƒé‡ã€‚ Select é€‰å®šé˜¶æ®µï¼šä»ä¼˜é€‰åˆ—è¡¨ä¸­é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹ï¼Œç§°ä¸º Selectã€‚é€‰æ‹©çš„ Node å³ä¸ºæœ€ç»ˆéƒ¨ç½² Pod çš„æœºå™¨ã€‚  é¢„é€‰é˜¶æ®µ Scheduler èµ· n ä¸ª goroutine å¹¶å‘å¯¹æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰ nodes è¿›è¡Œ predicates ä¸²è¡Œè¿ç®—è¿‡æ»¤è§„åˆ™ï¼Œç›´åˆ°æœ€ç»ˆè¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„ nodes åˆ—è¡¨]]></description>
</item><item>
    <title>äº‘åŸç”Ÿä¸‹å‘å¸ƒå¹³å°å»ºè®¾æ€è€ƒ</title>
    <link>https://example.com/talk-about-cloud-based-release-platform/</link>
    <pubDate>Sat, 02 Oct 2021 11:04:16 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/talk-about-cloud-based-release-platform/</guid>
    <description><![CDATA[<div style="text-align: right;">Lexus Lee</div>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>ä»è¿‡å»å‡ ä¸ªæœˆ, æˆ‘çš„å·¥ä½œç²¾åŠ›ä¸»è¦é›†ä¸­åœ¨ä¼ä¸šçº§å‘å¸ƒå¹³å°çš„å»ºè®¾ä¸Š. åŒæ—¶ä¹Ÿèšç„¦åœ¨å®¹å™¨äº‘ <strong>PaaS</strong> å±‚å»ºè®¾ã€‚</p>
<p>åœ¨å½“ä¸‹äº‘åŸç”Ÿæ—¶ä»£, å‘å¸ƒå¹³å°é€šå¸¸èµ·åˆ°ä¸€ä¸ªè”ç»“ PaaS å’Œ IaaS çš„ä½œç”¨. é€šè¿‡åœ¨ <strong>PaaS</strong> å±‚æŠ½è±¡ï¼Œå°† IaaS å±‚åŸºå»ºç»†èŠ‚å±è”½ï¼ŒåŒæ—¶é€šè¿‡ api å’Œå„ä¸ªæœåŠ¡å¹³å°(CI/CD æœåŠ¡, ç›‘æ§å‘Šè­¦æœåŠ¡, ç½‘å…³æœåŠ¡, å·¥å•ç³»ç»Ÿ, æœåŠ¡æ²»ç†ç³»ç»Ÿç­‰) äº¤äº’, åœ¨äº‘å¹³å°æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å¿«æ·å…¥å£ï¼Œä»é€»è¾‘ä¸Šè¿›è¡Œæ±‡èšï¼Œä¾¿äºå¼€å‘è€…è¿›è¡Œ<strong>ä¸€ç«™å¼</strong>åº”ç”¨å‘å¸ƒã€æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æœåŠ¡æ²»ç†ã€æœåŠ¡è¿ç»´ç­‰æ“ä½œ.</p>]]></description>
</item><item>
    <title>åŸºäºæœåŠ¡ç”»åƒçš„å‚ç›´ä¼¸ç¼©ç³»ç»Ÿå»ºè®¾æ€è€ƒ</title>
    <link>https://example.com/service-portrait-vpa-design/</link>
    <pubDate>Tue, 28 Sep 2021 19:51:32 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/service-portrait-vpa-design/</guid>
    <description><![CDATA[<div style="text-align: right;">Lexus Lee</div>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>è¿‘æœŸå…¬å¸å¼€å§‹åšæˆæœ¬æ²»ç†, é™æœ¬å¢æ•ˆ. é€šè¿‡è§‚å¯Ÿä»¥å¾€å„ä¸šåŠ¡çº¿çš„èµ„æºè§„æ ¼é…ç½®, ä¸éš¾å‘ç°å­˜åœ¨å¤§é‡æœåŠ¡èµ„æºè¶…é…æƒ…å†µ. å³æœåŠ¡å®é™…èµ„æºå¼€é”€è¿œå°äºå…¶å£°æ˜çš„èµ„æºå¼€é”€. è€Œè¿™éƒ¨åˆ†çš„èµ„æºè¶…é…ç›´æ¥å¯¼è‡´äº†é›†ç¾¤çš„èµ„æºä½¿ç”¨ç‡è¾ƒä½. é€šå¸¸å½¢å¦‚ä¸‹å›¾</p>]]></description>
</item><item>
    <title>Talk about Containerd</title>
    <link>https://example.com/talk-about-containerd/</link>
    <pubDate>Sat, 10 Apr 2021 15:04:09 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/talk-about-containerd/</guid>
    <description><![CDATA[èƒŒæ™¯ æœ€è¿‘çœ‹ä¸€äº›ç¤¾åŒº issue ä¸­æ­£å¥½æ¥è§¦åˆ° containerd æºç , æ—©å¹´å¤§å®¶åŸºæœ¬éƒ½ä½¿ç”¨ docker/podman è¿™ç±»å®¹å™¨ä¸Šå±‚åŒ…è£…, åŒ…æ‹¬æˆ‘ä¹Ÿæ˜¯, æ•…å¯¹çœŸæ­£å®¹å™¨è¿è¡Œæ—¶çš„ç»“æ„éƒ¨åˆ†äº†è§£å¾—ä¸å¤Ÿæ·±å…¥, æœ€è¿‘ k8s ç¤¾åŒºåœ¨ 1.21 è§„åˆ’ä¸Šè®¡åˆ’ä» kubelet ä¸­ç§»é™¤ docker-shim äº¤äº’çš„é€»è¾‘, å¤§åŠ¿ä¸Šç»„ä»¶èµ°ä¸Š containerd-shim, æ•…éœ€è¦ç€æ‰‹å¯¹å®¹å™¨è¿è¡Œæ—¶æ›´æ·±å…¥äº†è§£.
å¸¦ç€é—®é¢˜ä½œä¸ºå¼•å…¥,
å®¹å™¨åº•å±‚è¿˜æ˜¯å¯¹ Linux LXC çš„äº¤äº’, é‚£ç©¶ç«Ÿ docker daemon ä¸­æ˜¯å“ªä¸ªç»„ä»¶æ¥å®Œæˆè¿™ä¸€æ­¥çš„å‘¢ï¼Ÿ
1ã€èƒŒæ™¯çŸ¥è¯† é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ Docker Daemon ç”Ÿäº§å‡ºå®¹å™¨çš„è¿‡ç¨‹.
å½“å‰æ•´ä¸ª Docker è°ƒç”¨é“¾æ¶æ„å¯ä»¥ç”¨ä¸‹å›¾æ¥ç®€å•æ¦‚æ‹¬
ä» Docker 1.11 ä¹‹åï¼ŒDocker Daemon è¢«åˆ†æˆäº†å¤šä¸ªæ¨¡å—ä»¥é€‚åº” OCI æ ‡å‡†ã€‚æ‹†åˆ†ä¹‹åï¼Œç»“æ„åˆ†æˆäº†ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š
16å¹´12æœˆ Dockerå…¬å¸å®£å¸ƒå°† containerd ä»Docker Engineä¸­åˆ†ç¦»ï¼Œå¹¶æèµ åˆ°å¼€æºç¤¾åŒºç‹¬ç«‹å‘å±•å’Œè¿è¥ã€‚
ä¸€ä¸ªå·¥ä¸šæ ‡å‡†çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œæ³¨é‡ç®€å•ã€ å¥å£®æ€§ã€å¯ç§»æ¤æ€§
Dockeræœ¬èº«å…¶å®å·²ç»è¢«å‰¥ç¦»å¹²å‡€äº†ï¼Œåªå‰©ä¸‹ Docker è‡ªèº«ä½œä¸º cli çš„ä¸€äº›ç‰¹è‰²åŠŸèƒ½äº†ï¼ŒçœŸæ­£å®¹å™¨çš„ç®¡æ§éƒ½åœ¨ containerd é‡Œå®ç°ã€‚
åœ¨ 17 å¹´ dockeré‡å‘½åä¸ºmoby, ä»å‘½åä¸Šé€æ¸è„±ç¦»å’Œ container çš„å…³ç³», è€Œ Moby æ›´åƒæ˜¯ä¸€ä¸ªâ€œä¹é«˜ç§¯æœ¨â€ï¼Œå®ƒåŒ…å«äº†å®¹å™¨åŒ–çš„ç»„ä»¶åº“ åº•å±‚çš„æ„å»ºã€æ—¥å¿—å¤„ç†ã€å·ç®¡ç†ã€ç½‘ç»œã€é•œåƒç®¡ç†ã€containerdã€SwarmKitç­‰æ¨¡å—, æ˜¯ä¸ªå¤§æ‚çƒ©.]]></description>
</item><item>
    <title>è¯‘ã€ŠScuba: Diving into data at Facebookã€‹</title>
    <link>https://example.com/scuba-diving-into-data-at-facebook/</link>
    <pubDate>Fri, 05 Feb 2021 10:29:05 &#43;0800</pubDate>
    <author>Author</author>
    <guid>https://example.com/scuba-diving-into-data-at-facebook/</guid>
    <description><![CDATA[Scuba: Diving into Data at Facebook åŸæ–‡é“¾æ¥: https://www.semanticscholar.org/paper/Scuba%3A-Diving-into-Data-at-Facebook-Abraham-Allen/0bce0735ef3ea01e02b73c98338727d519a71be4
æ¦‚è¦ Facebookå¾ˆé‡è§†æ€§èƒ½ç›‘æ§ã€‚ä¸€äº›æ€§èƒ½é—®é¢˜å¯èƒ½ä¼šå½±å“è¶…è¿‡10äº¿ç”¨æˆ·ï¼Œæ‰€ä»¥æˆ‘ä»¬è·Ÿè¸ªäº†æˆåƒä¸Šä¸‡çš„æœåŠ¡å™¨ï¼Œæ¯å¤©ä¸Šç™¾PBçš„ç½‘ç»œæµé‡ï¼Œæ¯å¤©ä¸Šç™¾ä¸ªä»£ç å˜æ›´ï¼Œä»¥åŠè®¸å¤šå…¶ä»–æŒ‡æ ‡ã€‚æˆ‘ä»¬å¯¹æ—¶å»¶æ€§çš„è¦æ±‚æ˜¯ï¼Œåœ¨äº‹ä»¶å‘ç”Ÿåçš„ä¸€åˆ†é’Ÿå†…ï¼Œå¦‚ä¸€ä¸ªå®¢æˆ·ç”µè¯è¯·æ±‚ï¼Œä¸€ä¸ªæäº¤äº†bugæŠ¥å‘Šï¼Œä¸€ä»½æ–°çš„ä»£ç å˜æ›´, èƒ½åŠæ—¶æ›´æ–°åˆ°å›¾è¡¨ï¼Œå¹¶åœ¨ç›‘æ§ç³»ç»Ÿä¸­å±•ç¤ºå‡ºæ¥ã€‚
Scuba æ˜¯Facebookçš„æ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œç”¨äºå¤§éƒ¨åˆ†çš„å®æ—¶åˆ†æã€‚Scuba æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ã€å¯æ‰©å±•çš„ã€åˆ†å¸ƒå¼çš„ã€å†…å­˜å¼çš„ Facebook è‡ªç ”æ•°æ®åº“ã€‚å®ƒç›®å‰ååç‡ä¸ºæ¯ç§’æ•°ç™¾ä¸‡è¡Œ(äº‹ä»¶)æµå…¥ï¼Œå¹¶ä»¥åŒæ ·çš„é€Ÿåº¦è¿‡æœŸæ•°æ®è¿›è¡Œæµå‡ºã€‚Scuba å­˜å‚¨åç«¯åœ¨æ•°ç™¾å°æœåŠ¡å™¨ä¸Šï¼Œæ¯å°æœåŠ¡å™¨ä¸Šçš„æ•°æ®å®Œå…¨åœ¨å†…å­˜ä¸­ï¼Œæ¯å°æœåŠ¡å™¨å†…å­˜è§„æ ¼ä¸º 144 GB RAMã€‚ä¸ºäº†å¤„ç†æ¯ä¸ªæŸ¥è¯¢ï¼ŒScuba ä¼šä»æ‰€æœ‰çš„æ•°æ®ä¸­èšåˆæœåŠ¡å™¨ä»¥å¤„ç†æ¯å¤©å¤„ç†è¿‘ç™¾ä¸‡æ¬¡æŸ¥è¯¢ã€‚
åœ¨ Facebook, Scuba å¹¿æ³›åº”ç”¨äºäº¤äº’å¼ã€ä¸´æ—¶æ€§çš„åˆ†ææŸ¥è¯¢ï¼Œè¿™äº›æŸ¥è¯¢è¿è¡Œåœ¨åœ¨ä¸€ç§’å†…å®Œæˆå¯¹å®æ—¶æ•°æ®çš„å¤„ç†ã€‚
1. ä»‹ç» åœ¨Facebookï¼Œæ— è®ºæ˜¯è¯Šæ–­æ€§èƒ½å›å½’è¿˜æ˜¯è¡¡é‡åŸºç¡€è®¾æ–½å˜åŒ–å¸¦æ¥çš„å½±å“ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›ç”¨æœ‰æ•ˆæ•°æ®æ¥è¡¡é‡ã€‚FacebookåŸºç¡€è®¾æ–½å›¢é˜Ÿä¾é çš„æ˜¯åœ¨å®æ—¶æ•°æ®ç›‘æ§ä»¥ç¡®ä¿ç½‘ç«™å§‹ç»ˆè¿è¡Œé¡ºåˆ©ã€‚æˆ‘ä»¬çš„éœ€æ±‚åŒ…æ‹¬èƒ½åœ¨éå¸¸çŸ­çš„å»¶è¿Ÿï¼ˆé€šå¸¸åœ¨ä¸€åˆ†é’Ÿä»¥å†…ï¼‰ä»è¿è¡ŒFacebookçš„ç½‘ç»œæœåŠ¡å™¨ä¸ŠæŸ¥è¯¢åˆ°å‘ç”Ÿçš„äº‹ä»¶ã€‚æŸ¥è¯¢æ•°æ®çš„çµæ´»æ€§å’Œé€Ÿåº¦å¯¹äºè¯Šæ–­å‡ºé—®é¢˜æ ¹å› å¸¦æ¥ä¸å°‘æ”¶ç›Šã€‚è¯†åˆ«é—®é¢˜çš„æ ¹æœ¬åŸå› å¾€å¾€æ˜¯ç”±äºå„å­ç³»ç»Ÿä¹‹é—´å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œå¾ˆéš¾åœ¨çŸ­æ—¶é—´å†…å®Œæˆã€‚ç„¶è€Œï¼Œä¸€æ—¦å‡ºç°äº†æ²¡æœ‰åœ¨å‡ åˆ†é’Ÿæˆ–å‡ å°æ—¶æœªè§£å†³çš„é—®é¢˜ã€‚é‚£ Facebook çš„10äº¿ç”¨æˆ·å°±ä¼šå˜å¾—ä¸å¿«ä¹ï¼Œä»è€Œå¯¹ Facebook æ•´ä½“å‘å±•ä¸åˆ©ã€‚
ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œ èµ·åˆï¼Œæˆ‘ä»¬ä¾é çš„æ˜¯é¢„å…ˆæ±‡æ€»çš„å›¾è¡¨å’Œä¸€å¥—ç²¾å¿ƒç®¡ç†ã€æ‰‹å·¥ç¼–ç çš„è„šæœ¬ï¼Œé€šè¿‡MySQLæ•°æ®åº“çš„å½¢å¼ç®¡ç†æ•°æ®ã€‚åˆ°äº†2011å¹´ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆå˜å¾—è¿‡äºåƒµåŒ–å’Œç¼“æ…¢ã€‚å®ƒæ— æ³•è·Ÿä¸Šä¸æ–­å¢é•¿çš„æ•°æ®ååç‡å’ŒæŸ¥è¯¢æ•ˆç‡ã€‚è€Œ Facebookå†…éƒ¨çš„å…¶ä»–æŸ¥è¯¢ç³»ç»Ÿï¼Œæ¯”å¦‚Hive[20]å’ŒPeregrine[13]ï¼Œåœ¨æ•°æ®è¢«æä¾›ç»™æŸ¥è¯¢ä¹‹å‰ï¼ŒæŸ¥è¯¢æ•°æ®è¢«å†™å…¥HDFSï¼Œæœ‰å¾ˆé•¿çš„ï¼ˆå…¸å‹çš„ä¸€å¤©ï¼‰å»¶è¿Ÿï¼Œè€ŒæŸ¥è¯¢æœ¬èº«éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´æ¥è¿è¡Œã€‚
å› æ­¤ï¼Œæˆ‘ä»¬å»ºç«‹äº† Scubaï¼Œä¸€ä¸ªå¿«é€Ÿã€å¯æ‰©å±•ã€å†…å­˜æ•°æ®åº“ã€‚Scuba æ˜¯æˆ‘ä»¬æ”¶é›†å’Œåˆ†ææ¥è‡ªå„ç§ç³»ç»Ÿçš„æ•°æ®çš„æ–¹å¼çš„ä¸€ä¸ªé‡å¤§æ¼”å˜ï¼Œæ­£æ˜¯è¿™äº›ç³»ç»Ÿä¿è¯äº†ç½‘ç«™æ¯å¤©çš„æ­£å¸¸è¿è¡Œã€‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ Scuba èƒ½å¯¹å¤§å¤šæ•°å®æ—¶çš„ã€ç»“æ„åŒ–çš„äººå·¥æ•°æ®è¿›è¡Œåˆ†æã€‚æˆ‘ä»¬å°†åœ¨æœ¬æ–‡åé¢å°† Scuba ä¸å…¶ä»–æ•°æ®ç®¡ç†ç³»ç»Ÿè¿›è¡Œæ¯”è¾ƒï¼Œä½†æ®æˆ‘ä»¬äº†è§£ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–ç³»ç»Ÿèƒ½åƒ Scuba ä¸€æ ·å¿«é€Ÿåœ°ååæ•°æ®å¹¶è¿›è¡Œå¤æ‚çš„æŸ¥è¯¢ã€‚
å¦‚ä»Šï¼ŒScuba è¿è¡Œåœ¨æ•°ç™¾å°æœåŠ¡å™¨ä¸Šï¼Œæ¯å°æœåŠ¡å™¨æœ‰144 GBå†…å­˜ï¼Œåœ¨ä¸€ä¸ªæ— å…±äº«æ¶æ„çš„é›†ç¾¤ä¸­ã€‚å®ƒåœ¨å†…å­˜ä¸­ä¸º1000å¤šä¸ªè¡¨å­˜å‚¨äº†å¤§çº¦70TBçš„å‹ç¼©æ•°æ®ï¼Œé€šè¿‡åœ¨æ‰€æœ‰æœåŠ¡å™¨ä¸Šéšæœºåˆ†é…æ¯ä¸ªè¡¨æ¥åˆ†é…å†…å­˜ã€‚Scuba æ¯ç§’å¯å¤„ç†æ•°ç™¾ä¸‡è¡Œã€‚ç”±äº Scuba æ˜¯å†…å­˜ç»‘å®šçš„ï¼Œå®ƒèƒ½ä»¥åŒæ ·çš„é€Ÿåº¦è¿‡æœŸæ‰è€æ•°æ®ã€‚ä¸ºäº†é™åˆ¶æ•°æ®é‡ï¼ŒScuba å…è®¸è¡ŒæŒ‡å®šä¸€ä¸ªå¯é€‰çš„é‡‡æ ·ç‡ï¼Œè¿™è¡¨æ˜ Scuba åªåŒ…å«åŸå§‹äº‹ä»¶çš„ä¸€å°éƒ¨åˆ†ï¼ˆé€šå¸¸æ˜¯100åˆ†ä¹‹ä¸€åˆ°100ä¸‡åˆ†ä¹‹ä¸€ï¼‰ã€‚è¿™ç§é‡‡æ ·å¯¹äºåƒ Facebook å®¢æˆ·ç«¯è¯·æ±‚è¿™æ ·æ¯ç§’å‘ç”Ÿæ•°ç™¾ä¸‡æ¬¡çš„äº‹ä»¶æ˜¯ååˆ†å¿…è¦çš„ã€‚é‡‡æ ·å¯ä»¥æ˜¯ç»Ÿä¸€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºä¸€äº›å…³é”®æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·IDç­‰ã€‚Scubaåœ¨è®¡ç®—æ±‡æ€»æ—¶ï¼Œä¼šå¯¹é‡‡æ ·ç‡è¿›è¡Œèšåˆè¡¥å¿ã€‚
é™¤äº†æä¾›ä¸€ä¸ª SQL æŸ¥è¯¢æ¥å£ï¼ˆå¯¹äºä¸€ä¸ª SQL å­é›†ï¼ŒåŒ…æ‹¬åˆ†ç»„å’Œèšåˆï¼Œä½†ä¸åŒ…æ‹¬è¿æ¥è¡¨ï¼‰ï¼ŒScuba æä¾›äº†ä¸€ä¸ª GUIï¼Œå¯ä»¥ç”Ÿæˆæ—¶é—´åºåˆ—å›¾ã€é¥¼å›¾ã€åˆ—å€¼åˆ†å¸ƒï¼Œä»¥åŠé™¤æ–‡æœ¬é€‰é¡¹ä¹‹å¤–çš„å…¶ä»–åå‡ ç§æ•°æ®çš„å¯è§†åŒ–ã€‚å›¾1æ˜¾ç¤ºäº†ä¸€ä¸ªæ—¶é—´åºåˆ—å›¾ï¼Œåœ¨Scuba GUIä¸­å¯¹é¡µé¢æµé‡è¿›è¡Œäº†ä¸€å‘¨çš„æ¯”è¾ƒã€‚åœ¨åå°ï¼Œä¸€ä¸ªèšåˆæ ‘å°†æ¯ä¸ªæŸ¥è¯¢åˆ†å‘åˆ°æ¯ä¸ªæœåŠ¡å™¨ï¼Œç„¶åæ”¶é›†ç»“æœå‘å›å®¢æˆ·ç«¯ã€‚
è™½ç„¶ Scuba æ˜¯ä¸ºäº†æ”¯æŒæ€§èƒ½åˆ†æè€Œå»ºç«‹çš„ï¼Œä½†å®ƒå¾ˆå¿«å°±æˆä¸ºäº†åœ¨å…¶ä»–æ—¶é—´æ•æ„Ÿæ•°æ®ä¸Šæ‰§è¡Œæ¢ç´¢æ€§æŸ¥è¯¢çš„é¦–é€‰ç³»ç»Ÿã€‚Facebookçš„è®¸å¤šå›¢é˜Ÿéƒ½åœ¨ä½¿ç”¨Scubaã€‚
 ç§»åŠ¨å¼€å‘å›¢é˜Ÿä½¿ç”¨ Scuba æ¥è·Ÿè¸ªå“ªäº›ç”¨æˆ·åœ¨è¿è¡Œä¸åŒçš„ç§»åŠ¨è®¾å¤‡ã€æ“ä½œç³»ç»Ÿå’ŒFacebookåº”ç”¨çš„ç‰ˆæœ¬ã€‚ å¹¿å‘Šå¼€å‘å›¢é˜Ÿåˆ©ç”¨ Scuba æ¥ç›‘æ§äººä»¬å¯¹å¹¿å‘Šçš„å°è±¡ã€ç‚¹å‡»å’Œæ”¶å…¥çš„å˜åŒ–ã€‚å½“å‡ºç°ä¸‹é™æ—¶ï¼Œä»–ä»¬å¯ä»¥è¿…é€Ÿå°†å…¶ç¼©å°åˆ°ç‰¹å®šçš„å›½å®¶ã€å¹¿å‘Šç±»å‹æˆ–æœåŠ¡å™¨é›†ç¾¤ï¼Œå¹¶ç¡®å®šæ ¹æœ¬é—®é¢˜ã€‚ SRE å›¢é˜Ÿè¿‡ä½¿ç”¨ Scubaè§‚å¯ŸæœåŠ¡å™¨é”™è¯¯ã€‚å½“å‘ç”Ÿå³°å€¼æ—¶ï¼Œä»–ä»¬å¯ä»¥ç²¾ç¡®åœ°æŒ‡å‡ºæ˜¯å¦æ˜¯ç”±äºç‰¹å®šç«¯ç‚¹ä¸­çš„é”™è¯¯ã€ç‰¹å®šæ•°æ®ä¸­å¿ƒæˆ–æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æœåŠ¡ï¼Œæˆ–æ•°æ®ä¸­å¿ƒçš„éƒ¨åˆ†ç‰©ç†é—®é¢˜ã€‚ é”™è¯¯æŠ¥å‘Šç›‘æµ‹æ¯å°æ—¶è¿è¡Œæ•°åƒæ¬¡æŸ¥è¯¢ï¼Œä»¥å¯»æ‰¾Facebookç”¨æˆ·æŠ¥å‘Šçš„é”™è¯¯æ•°é‡é«˜å³°ï¼ŒæŒ‰å‡ åä¸ªäººå£ç»Ÿè®¡ç»´åº¦ï¼ˆä½ç½®ã€å¹´é¾„ã€å¥½å‹æ•°ç­‰ï¼‰è¿›è¡Œåˆ†ç»„ã€‚  æ€»çš„æ¥è¯´ï¼Œç”¨æˆ·ä¼šå…ˆæå‡ºé«˜çº§åˆ«çš„æ±‡æ€»æŸ¥è¯¢ï¼Œä»¥è¯†åˆ«æ•°æ®ä¸­çš„æœ‰è¶£ç°è±¡ï¼Œç„¶åå†æ·±å…¥æŒ–æ˜ï¼ˆå› æ­¤è¢«ç§°ä¸ºScubaï¼‰ï¼Œä»¥æ‰¾åˆ°æ„Ÿå…´è¶£çš„åŸºç¡€æ•°æ®ç‚¹ã€‚åœ¨ä¸Šè¿°æ‰€æœ‰æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ²¿ç€å¤šä¸ªç»´åº¦å¯¹æ•°æ®è¿›è¡Œä¸´æ—¶åˆ†è§£æ˜¯è‡³å…³é‡è¦çš„ã€‚]]></description>
</item><item>
    <title>è¯‘ã€ŠAutopilot: workload autoscaling at Googleã€‹</title>
    <link>https://example.com/google-autopilot-scaling/</link>
    <pubDate>Sun, 10 Jan 2021 13:10:46 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://example.com/google-autopilot-scaling/</guid>
    <description><![CDATA[æ‘˜è¦ åŸæ–‡é“¾æ¥ï¼šhttps://dl.acm.org/doi/pdf/10.1145/3342195.3387524
åœ¨è®¸å¤šå…¬å…±å’Œç§æœ‰äº‘ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦æŒ‡å®šèµ„æºé‡ï¼ˆCPUå†…æ ¸å’ŒRAMï¼‰çš„é™åˆ¶ä»¥ä¸ºå…¶å·¥ä½œè´Ÿè·æä¾›èµ„æºã€‚ è¶…å‡ºå…¶é™åˆ¶çš„ä½œä¸šå¯èƒ½ä¼šå—åˆ°é™åˆ¶æˆ–ç»ˆæ­¢ï¼Œä»è€Œå¯¼è‡´æœ€ç»ˆç”¨æˆ·è¯·æ±‚çš„å»¶è¿Ÿæˆ–ä¸¢å¼ƒï¼Œå› æ­¤äººå·¥æ“ä½œäººå‘˜é’ˆå¯¹è¿™ç§é—®é¢˜å‡ºäºè°¨æ…è€ƒè™‘ï¼Œä¼šç”³è¯·é«˜äºä»»åŠ¡è‡ªèº«éœ€è¦çš„é…ç½®ã€‚ ä»è§„æ¨¡ä¸Šè®²ï¼Œè¿™å°†å¯¼è‡´å¤§é‡çš„èµ„æºæµªè´¹ã€‚
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGoogleä½¿ç”¨Autopilotè‡ªåŠ¨é…ç½®èµ„æºï¼ŒåŒæ—¶è°ƒæ•´ä½œä¸šä¸­çš„å¹¶å‘ä»»åŠ¡æ•°ï¼ˆæ°´å¹³ç¼©æ”¾ï¼‰å’Œå•ä¸ªä»»åŠ¡çš„CPU /å†…å­˜é™åˆ¶ï¼ˆå‚ç›´ç¼©æ”¾ï¼‰ã€‚ Autopilotä¸äººå·¥æ“ä½œå‘˜éµå¾ªç›¸åŒçš„åŸåˆ™ï¼šAutopilotçš„ä¸»è¦ç›®æ ‡æ˜¯å‡å°‘æ¾å¼›ï¼ˆslackï¼‰ï¼ˆç”³è¯·èµ„æºå’Œå®é™…èµ„æºä½¿ç”¨ä¹‹é—´çš„å·®å¼‚ï¼‰ï¼ŒåŒæ—¶æœ€å¤§ç¨‹åº¦åœ°é™ä½å› å†…å­˜ä¸è¶³ï¼ˆOOMï¼‰é”™è¯¯æˆ– ç”±äºCPUèŠ‚æµï¼Œå…¶æ€§èƒ½ä¸‹é™ã€‚ Autopilotå°†æœºå™¨å­¦ä¹ ç®—æ³•åº”ç”¨åˆ°æœ‰å…³ä½œä¸šå…ˆå‰æ‰§è¡Œæƒ…å†µçš„å†å²æ•°æ®ä¸Šï¼Œå†åŠ ä¸Šä¸€ç»„ç»è¿‡å¾®è°ƒçš„å¯å‘å¼æ–¹æ³•æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚ åœ¨å®è·µä¸­ï¼ŒAutopilotå·¥ä½œåªæœ‰23ï¼…çš„æ¾å¼›ï¼ˆslackï¼‰ï¼Œè€Œæ‰‹åŠ¨ç®¡ç†å·¥ä½œåªæœ‰46ï¼…çš„æ¾å¼›ï¼ˆslackï¼‰ã€‚ æ­¤å¤–ï¼ŒAutopilotå°†å—OOMä¸¥é‡å½±å“çš„å·¥ä½œæ•°é‡å‡å°‘äº†10å€ã€‚
å°½ç®¡æœ‰å…¶ä¼˜ç‚¹ï¼Œè¦ç¡®ä¿Autopilotè¢«å¹¿æ³›é‡‡ç”¨ä»éœ€ä»˜å‡ºå·¨å¤§çš„åŠªåŠ›ï¼ŒåŒ…æ‹¬ä½¿å°šæœªåŠ å…¥çš„å®¢æˆ·å®¹æ˜“çœ‹åˆ°æ½œåœ¨çš„å»ºè®®ï¼Œè‡ªåŠ¨è¿ç§»æŸäº›ç±»åˆ«çš„ä»»åŠ¡ä»¥åŠå¢åŠ å¯¹è‡ªå®šä¹‰æ¨èå™¨çš„æ”¯æŒã€‚ åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒAutopilotä»»åŠ¡å Googleèµ„æºä½¿ç”¨çš„48ï¼…ä»¥ä¸Šã€‚
ACMå‚è€ƒæ ¼å¼ï¼š
Krzysztof Rzadcaï¼ŒPawel Findeisenï¼ŒJacek Swiderskiï¼ŒPrzemyslaw Zychï¼ŒPrzemyslaw Broniekï¼ŒJarek Kusmierekï¼ŒPawel Nowakï¼ŒBeata Strackï¼ŒPiotr Witusowskiï¼ŒSteven Handå’ŒJohn Wilkesã€‚ 2020å¹´ã€‚
Autopilotï¼šGoogleçš„å·¥ä½œè´Ÿè½½è‡ªåŠ¨ç¼©æ”¾ã€‚ åœ¨ç¬¬åäº”æ¬§æ´²2020å¹´4æœˆ27æ—¥è‡³30æ—¥ï¼Œè®¡ç®—æœºç³»ç»Ÿä¼šè®®ï¼ˆEuroSys'20ï¼‰ï¼Œå¸Œè…Šä¼Šæ‹‰å…‹åˆ©ç¿ã€‚ ACMï¼Œç¾å›½çº½çº¦ï¼Œçº½çº¦ï¼Œå…±16é¡µã€‚ https://doi. org/10.1145/3342195.3387524
1 ä»‹ç» è®¸å¤šç±»å‹çš„å…¬å…±äº‘å’Œç§æœ‰äº‘ç³»ç»Ÿè¦æ±‚å…¶ç”¨æˆ·å£°æ˜åœ¨æ‰§è¡ŒæœŸé—´å…¶å·¥ä½œè´Ÿè½½å°†éœ€è¦å¤šå°‘ä¸ªå®ä¾‹ä»¥åŠæ¯ä¸ªå®ä¾‹æ‰€éœ€çš„èµ„æºï¼šåœ¨å…¬å…±äº‘å¹³å°ä¸­ï¼Œç”¨æˆ·éœ€è¦é€‰æ‹©ä»–ä»¬éœ€è¦ç§Ÿç”¨è™šæ‹Ÿæœºï¼ˆVMï¼‰çš„ç±»å‹å’Œæ•°é‡ï¼› åœ¨Kubernetesé›†ç¾¤ä¸­ï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®Podå‰¯æœ¬çš„æ•°é‡å’Œå•ä¸ªPodçš„èµ„æºé™åˆ¶; åœ¨Googleä¸­ï¼Œæˆ‘ä»¬è¦æ±‚ç”¨æˆ·æŒ‡å®šæ‰€éœ€çš„å®¹å™¨æ•°é‡ä»¥åŠæ¯ä¸ªå®¹å™¨çš„èµ„æºé™åˆ¶ã€‚ è¿™äº›é™åˆ¶ä½¿äº‘åŸºç¡€æ¶æ„èƒ½å¤Ÿæä¾›è¶³å¤Ÿçš„æ€§èƒ½éš”ç¦»ï¼Œä»è€Œä½¿äº‘è®¡ç®—æˆä¸ºå¯èƒ½ã€‚
ä½†æ˜¯é™åˆ¶ï¼ˆä¸»è¦æ˜¯ï¼‰å¯¹ç”¨æˆ·é€ æˆäº†éº»çƒ¦ã€‚ å¾ˆéš¾ä¼°è®¡ä¸€ä¸ªä½œä¸šéœ€è¦å¤šå°‘èµ„æºæ‰èƒ½æœ€ä½³è¿è¡Œï¼šCPUåŠŸç‡ï¼Œå†…å­˜å’ŒåŒæ—¶è¿è¡Œçš„å‰¯æœ¬æ•°çš„æ­£ç¡®ç»„åˆã€‚ è´Ÿè½½æµ‹è¯•å¯ä»¥å¸®åŠ©æ‰¾åˆ°åˆå§‹ä¼°è®¡å€¼ï¼Œä½†æ˜¯éšç€èµ„æºéœ€æ±‚éšæ—¶é—´å˜åŒ–ï¼Œè¿™äº›å»ºè®®å°†è¿‡æ—¶ï¼Œå› ä¸ºè®¸å¤šæœ€ç»ˆç”¨æˆ·æœåŠ¡å·¥ä½œå…·æœ‰æ¯æ—¥æˆ–æ¯å‘¨çš„è´Ÿè½½æ¨¡å¼ï¼Œå¹¶ä¸”éšç€æœåŠ¡å˜å¾—è¶Šæ¥è¶Šæµè¡Œï¼Œæµé‡åœ¨æ›´é•¿çš„æ—¶é—´å†…å‘ç”Ÿå˜åŒ– ã€‚ æœ€åï¼Œå¤„ç†ç»™å®šè´Ÿè½½æ‰€éœ€çš„èµ„æºä¼šéšç€åŸºç¡€è½¯ä»¶æˆ–ç¡¬ä»¶å †æ ˆçš„æ–°åŠŸèƒ½ï¼Œä¼˜åŒ–å’Œæ›´æ–°è€Œå˜åŒ–ã€‚å¦‚æœCPUå®¹é‡ä¸è¶³ï¼Œè¶…å‡ºè¯·æ±‚çš„èµ„æºå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œæˆ–è€…å¯¼è‡´ä»»åŠ¡è¢«æ€æ­» å†…å­˜ä¸è¶³ï¼ˆOOMï¼‰ã€‚ éƒ½ä¸æ˜¯å¥½äº‹ã€‚
ä»è°ƒç ”ç»“æœçœ‹ï¼Œç†æ€§çš„ç”¨æˆ·å°†æ•…æ„é«˜ä¼°å…¶å·¥ä½œæ‰€éœ€çš„èµ„æºï¼Œä»è€Œå¯¼è‡´å¯¹ç‰©ç†èµ„æºçš„ä¸è‰¯åˆ©ç”¨ã€‚ ä¸€é¡¹åˆ†æ[26]å¯¹åœ¨ä¸€ä¸ªGoogleé›†ç¾¤[27]ä¸Šæ‰§è¡Œçš„ä¸ºæœŸä¸€ä¸ªæœˆçš„ä½œä¸šè·Ÿè¸ªæ˜¾ç¤ºï¼Œå¹³å‡å†…å­˜åˆ©ç”¨ç‡ä¸º50ï¼…ï¼› å¯¹é˜¿é‡Œå·´å·´YARNé›†ç¾¤çš„å¦ä¸€é¡¹åˆ†æ[23]æ˜¾ç¤ºä»»åŠ¡çš„å³°å€¼å†…å­˜åˆ©ç”¨ç‡ä»æœªè¶…è¿‡80ï¼…ã€‚
é’ˆå¯¹é…ç½®èµ„æºçš„å›°éš¾ï¼Œä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯é‡‡ç”¨æ°´å¹³è‡ªåŠ¨ç¼©æ”¾å™¨ï¼Œè¯¥ç¼©æ”¾å™¨é€šè¿‡ç›‘æ§ç»ˆç«¯ç”¨æˆ·æµé‡æˆ–å¹³å‡CPUåˆ©ç”¨ç‡çš„å˜åŒ–æ·»åŠ æˆ–åˆ é™¤å‰¯æœ¬æ¥ç¼©æ”¾ä»»åŠ¡ã€‚ æ‰€æœ‰ä¸»è¦çš„äº‘æä¾›å•†ï¼ˆAWSï¼ŒAzureå’ŒGCPï¼‰éƒ½æä¾›æ°´å¹³è‡ªåŠ¨æ‰©å±•åŠŸèƒ½ï¼› å®ƒåœ¨æŸäº›äº‘ä¸­é—´ä»¶ï¼ˆå¦‚Kubernetesï¼‰ä¸­ä¹Ÿå¯ç”¨ã€‚ è¾ƒä¸å¸¸è§çš„æ¨¡å¼æ˜¯ä½¿ç”¨å‚ç›´è‡ªåŠ¨ç¼©æ”¾æ¥è°ƒæ•´æ¯ä¸ªå‰¯æœ¬å¯ç”¨çš„èµ„æºé‡ã€‚ ä¸¤ç§æŠ€æœ¯ä¹Ÿå¯ä»¥ç»„åˆã€‚
Autopilotæ˜¯Googleåœ¨å…¶å†…éƒ¨äº‘ä¸Šä½¿ç”¨çš„ä¸»è¦è‡ªåŠ¨ç¼©æ”¾å™¨ã€‚ å®ƒæä¾›æ°´å¹³å’Œå‚ç›´è‡ªåŠ¨ç¼©æ”¾ã€‚ æœ¬æ–‡é‡ç‚¹ä»‹ç»Autopilotçš„å†…å­˜å‚ç›´æ‰©å±•ï¼Œå› ä¸ºè¿™ç§æƒ…å†µé²œä¸ºäººçŸ¥ã€‚ è®ºæ–‡ï¼š
  æè¿°ä¸‹Autopilotï¼Œä»¥åŠå®ƒç”¨äºå‚ç›´è‡ªåŠ¨ç¼©æ”¾çš„ä¸¤ä¸ªä¸»è¦ç®—æ³•ï¼šç¬¬ä¸€ä¸ªç®—æ³•ä¾èµ–äºå†å²ç”¨é‡çš„æŒ‡æ•°å¹³æ»‘æ»‘åŠ¨çª—å£ï¼› å¦ä¸€ä¸ªæ˜¯åŸºäºä»å¼ºåŒ–å­¦ä¹ ä¸­å€Ÿç”¨çš„æ€æƒ³çš„å…ƒå­¦ä¹ ï¼Œè¯¥ç®—æ³•è¿è¡Œæ»‘åŠ¨çª—å£ç®—æ³•çš„è®¸å¤šå˜ä½“ï¼Œå¹¶ä¸ºæ¯ä¸ªä»»åŠ¡é€‰æ‹©å†å²æ•°æ®è¡¨ç°æœ€ä½³çš„ç®—æ³•ã€‚ï¼ˆè¯‘æ³¨ï¼šå¼ºåŒ–å­¦ä¹ ï¼šä¾èµ–æµ·é‡çš„è®­ç»ƒï¼Œå¹¶ä¸”éœ€è¦ç²¾å‡†çš„å¥–åŠ±ã€‚æˆæœ¬è¾ƒé«˜ä¸”æ¯”è¾ƒå¤æ‚ã€‚å…ƒå­¦ä¹ ï¼šå…·å¤‡è‡ªå­¦èƒ½åŠ›ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨è¿‡å»çš„ç»éªŒæ¥æŒ‡å¯¼æœªæ¥çš„ä»»åŠ¡ã€‚è¢«è®¤ä¸ºæ˜¯å®ç°é€šç”¨äººå·¥æ™ºèƒ½çš„å…³é”®ã€‚ï¼‰
  é€šè¿‡Googleçš„å·¥ä½œè´Ÿè½½é‡‡æ ·è¯„ä¼°Autopilotç®—æ³•çš„æœ‰æ•ˆæ€§ï¼›
  è®¨è®ºä¸ºä½¿æˆ‘ä»¬çš„é›†ç¾¤å¹¿æ³›é‡‡ç”¨Autopilotè€Œé‡‡å–çš„æ­¥éª¤ã€‚
  2 é€šè¿‡Borgç®¡ç†äº‘èµ„æº Autopilotçš„ç›®æ ‡å’Œåˆ¶çº¦å› ç´ æ¥è‡ªGoogleçš„BorgåŸºç¡€æ¶æ„ï¼Œå¹¶ä¸”é’ˆå¯¹Googleçš„å·¥ä½œè´Ÿè½½è¿›è¡Œäº†è°ƒæ•´ã€‚ æˆ‘ä»¬åœ¨æ­¤å¤„æä¾›äº†ä¸¤è€…çš„ç®€è¦æ¦‚è¿°ï¼šæœ‰å…³Borgçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[34]ï¼Œæœ‰å…³å·¥ä½œè´Ÿè½½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[26ã€27ã€31ã€35]ã€‚]]></description>
</item><item>
    <title>å‡çº§ k8s é›†ç¾¤ docker</title>
    <link>https://example.com/upgrade-dockerd-in-k8s/</link>
    <pubDate>Fri, 10 Jul 2020 19:10:46 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://example.com/upgrade-dockerd-in-k8s/</guid>
    <description><![CDATA[èƒŒæ™¯ æœ€è¿‘éœ€è¦ç»™ k8s é›†ç¾¤å‡çº§ docker, é¢„æœŸå‡åˆ° 19.03.x.
é‡åˆ°ä¸€äº›é—®é¢˜, è®°å½•ä¸‹
è°ƒè¯•æœŸé—´é‡åˆ°çš„é—®é¢˜: é›†ç¾¤ä¸­çš„ ingress æ˜¯ä»¥ daemonsets æ–¹å¼éƒ¨ç½², é€šè¿‡ node-selector é€‰æ‹©èŠ‚ç‚¹å®šæ­».
è€Œ kubectl drain node å¹¶ä¸ evict daemonset pods. æ•…åœ¨å‡çº§/é‡å¯ dockerd æœŸé—´ä¼šé€ æˆ ingress çŸ­æš‚ä¸å¯ç”¨. è€Œç°æœ‰çš„ lb çš„ health check ä¸èƒ½ cover è¿™ä¸€ç‚¹, ä»ä¼šæœ‰æµé‡æ‰“å…¥.ä¼šå¯¼è‡´å‡çº§æœŸé—´ ingress æµé‡é»‘æ´é—®é¢˜.
å¹¶ä¸” dockerd æ‹‰èµ·æ¥å, æœ‰äº› daemonsets ç”±äº ingress è‡ªèº« livenessProbe ç­‰åŸå› åœ¨ dockerd å‡çº§æœŸé—´æŒç»­ crashLoopbackoff äº†, ä¸€ä¸ªåŸå› æ˜¯ä»ç„¶ mount ä¸€ä»½æ—§çš„ docker overlay. åœ¨ delete pod é‡å¯åæ¢å¤. æ•…éœ€è¦ä¸€ä¸ªæ‰‹æ®µåœ¨å‡çº§åé‡å¯ ingress pods.
Ref https://github.com/kubernetes/kubernetes/issues/75482#issuecomment-511476698]]></description>
</item></channel>
</rss>
